# FlashNote æ’ä»¶å¼€å‘æ–‡æ¡£# FlashNote æ’ä»¶å¼€å‘æ–‡æ¡£



æ¬¢è¿æ¥åˆ° FlashNote æ’ä»¶å¼€å‘!æ¬¢è¿æ¥åˆ° FlashNote æ’ä»¶å¼€å‘æ–‡æ¡£ï¼è¿™é‡ŒåŒ…å«äº†å¼€å‘é«˜è´¨é‡æ’ä»¶æ‰€éœ€çš„æ‰€æœ‰èµ„æºã€‚



## ğŸ“š å¼€å‘æŒ‡å—## ğŸ“š æ–‡æ¡£å¯¼èˆª



**[development-guide.md](./development-guide.md)** - å®Œæ•´çš„æ’ä»¶å¼€å‘æ–‡æ¡£### æ–°æ‰‹å…¥é—¨



è¿™æ˜¯å”¯ä¸€ä¸”æƒå¨çš„æ’ä»¶å¼€å‘æŒ‡å—,åŒ…å«:- **[å¿«é€Ÿå¼€å§‹](./QUICK_START.md)** â­ æ¨èä»è¿™é‡Œå¼€å§‹

  - 5 åˆ†é’Ÿåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ’ä»¶

- âš ï¸ **æ ¸å¿ƒè¦æ±‚**: manifest.json å¿…é¡»åŒ…å« entry å­—æ®µ  - åŒ…å«å®Œæ•´çš„ç¤ºä¾‹ä»£ç 

- ğŸš€ **å¿«é€Ÿå¼€å§‹**: 5åˆ†é’Ÿåˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶  - å¸¸è§é—®é¢˜è§£ç­”

- ğŸ“‹ **Manifest é…ç½®**: å®Œæ•´çš„é…ç½®è¯´æ˜

- ğŸ”§ **Runtime API**: æ‰€æœ‰å¯ç”¨ API çš„è¯¦ç»†æ–‡æ¡£### æ ¸å¿ƒæ–‡æ¡£

- ğŸ¨ **UI çª—å£å¼€å‘**: åˆ›å»ºè‡ªå®šä¹‰ç•Œé¢

- ğŸŒˆ **UI Bridge ç³»ç»Ÿ**: è®¿é—®ä¸»åº”ç”¨çš„ä¸»é¢˜èµ„æº- **[å¼€å‘æŒ‡å—](./development-guide.md)**

- âœ… **æœ€ä½³å®è·µ**: å¼€å‘è§„èŒƒå’ŒæŠ€å·§  - æ’ä»¶ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

- ğŸ› **è°ƒè¯•ä¸æµ‹è¯•**: å¼€å‘æµç¨‹å’Œé—®é¢˜æ’æŸ¥  - Manifest é…ç½®è§„èŒƒ

- ğŸ“¦ **API é€ŸæŸ¥è¡¨**: å¿«é€ŸæŸ¥é˜…å¸¸ç”¨ API  - å¼€å‘æµç¨‹å’Œè°ƒè¯•æ–¹æ³•

  - å®‰è£…ä¸åˆ†å‘æŒ‡å—

## ğŸ’¡ ç¤ºä¾‹æ’ä»¶

- **[API å‚è€ƒ](./API_REFERENCE.md)**

åœ¨ `plugins/examples/` ç›®å½•ä¸‹æœ‰å¤šä¸ªç¤ºä¾‹æ’ä»¶:  - å®Œæ•´çš„ Runtime API æ–‡æ¡£

  - æ‰€æœ‰æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼

- **random-note** - ç®€å•ç¤ºä¾‹:éšæœºæ‰“å¼€ç¬”è®°  - ä»£ç ç¤ºä¾‹å’Œç”¨æ³•è¯´æ˜

- **ui-bridge-demo** - UI Bridge å®Œæ•´æ¼”ç¤º

- **react-demo** - React æ’ä»¶æ¼”ç¤º- **[UI Bridge API](./UI_BRIDGE_API.md)** â­ æ–°åŠŸèƒ½

- **comprehensive-api-demo** - å…¨åŠŸèƒ½ API æ¼”ç¤º  - æ’ä»¶ UI ä¸»é¢˜èµ„æºè®¿é—®

- **test-extended-permissions** - æƒé™ç³»ç»Ÿæµ‹è¯•  - 40+ CSS å˜é‡è‡ªåŠ¨åŒæ­¥ä¸»é¢˜

  - JavaScript API å’Œä¸»é¢˜ç›‘å¬

## âš ï¸ é‡è¦æç¤º  - å®Œæ•´ç¤ºä¾‹å’Œæœ€ä½³å®è·µ



**æ‰€æœ‰æ’ä»¶çš„ `manifest.json` éƒ½å¿…é¡»åŒ…å« `entry` å­—æ®µ!**- **[æœ€ä½³å®è·µ](./BEST_PRACTICES.md)** â­ å¿…è¯»

  - ä½¿ç”¨å…¨å±€ `runtime` å¯¹è±¡ï¼ˆé»„é‡‘æ³•åˆ™ï¼‰

è¿™æ˜¯æ’ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒè¦æ±‚,åœ¨ `electron/services/PluginManager.js` çš„ `validateManifest()` æ–¹æ³•ä¸­å¼ºåˆ¶æ ¡éªŒã€‚  - å®Œæ•´çš„å¼€å‘è§„èŒƒå’Œå»ºè®®

  - æ€§èƒ½ä¼˜åŒ–æŠ€å·§

ç¤ºä¾‹:  - å®‰å…¨å»ºè®®

```json  - é”™è¯¯å¤„ç†æ¨¡å¼

{

  "id": "my-plugin",### è®¾è®¡æ–‡æ¡£

  "name": "æˆ‘çš„æ’ä»¶",

  "version": "1.0.0",- **[UI Resources Design](./UI_RESOURCES_DESIGN.md)**

  "entry": "index.js",  - UI Bridge ç³»ç»Ÿæ¶æ„è®¾è®¡

  "permissions": [],  - å¤šé˜¶æ®µå®ç°è®¡åˆ’

  "minAppVersion": "2.1.0"  - æŠ€æœ¯ç»†èŠ‚å’Œå®ç°æ–¹æ¡ˆ

}

```## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ



## ğŸš€ å¿«é€Ÿå¼€å§‹### Runtime å¯¹è±¡



1. åˆ›å»ºæ’ä»¶ç›®å½•: `plugins/examples/my-plugin/`æ’ä»¶ä½¿ç”¨å…¨å±€ `runtime` å¯¹è±¡è®¿é—®æ‰€æœ‰ APIï¼š

2. ç¼–å†™ `manifest.json` (å¿…é¡»åŒ…å« entry å­—æ®µ!)

3. ç¼–å†™ `index.js````javascript

4. å¯åŠ¨å¼€å‘: `npm run electron-dev`runtime.onActivate(async (context) => {

5. åœ¨æ’ä»¶å•†åº—åŠ è½½æµ‹è¯•  runtime.logger.info('æ’ä»¶æ¿€æ´»')

  

è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ [development-guide.md](./development-guide.md)ã€‚  runtime.registerCommand({ id: 'hello', title: 'æ‰“æ‹›å‘¼' }, async () => {

    await runtime.notifications.show({

## ğŸ¤ è´¡çŒ®      title: 'ä½ å¥½',

      body: 'æ¬¢è¿ä½¿ç”¨ FlashNote',

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!      type: 'success'

    })

---  })

})

**ç¥ä½ å¼€å‘æ„‰å¿«!** ğŸ‰```


### æƒé™ç³»ç»Ÿ

æ’ä»¶å¿…é¡»åœ¨ `manifest.json` ä¸­å£°æ˜æ‰€éœ€æƒé™ï¼š

```json
{
  "permissions": [
    "notes:read",
    "ui:open-note",
    "notifications:show"
  ]
}
```

### æ²™ç®±éš”ç¦»

- æ’ä»¶è¿è¡Œåœ¨ç‹¬ç«‹çš„ Worker çº¿ç¨‹ä¸­
- æ— æ³•ç›´æ¥è®¿é—® Node.js æ¨¡å—æˆ–æ–‡ä»¶ç³»ç»Ÿ
- æ‰€æœ‰æ“ä½œé€šè¿‡ Runtime API è¿›è¡Œ

## ğŸ’¡ ç¤ºä¾‹æ’ä»¶

### ç®€å•ç¤ºä¾‹

- **[random-note](../examples/random-note/)** - éšæœºæ‰“å¼€ä¸€ç¯‡ç¬”è®°
  - æ¼”ç¤ºåŸºç¡€å‘½ä»¤æ³¨å†Œ
  - æ•°æ®è®¿é—®å’Œ UI æ“ä½œ
  - é”™è¯¯å¤„ç†

### é«˜çº§ç¤ºä¾‹

- **[ai-task-planner](../examples/ai-task-planner/)** - AI ä»»åŠ¡è§„åˆ’åŠ©æ‰‹
  - è‡ªå®šä¹‰ UI çª—å£
  - å¾…åŠäº‹é¡¹æ“ä½œ
  - AI æ¨ç†é›†æˆ

## ğŸ”§ å¼€å‘å·¥å…·

### æœ¬åœ°å¼€å‘

1. å°†æ’ä»¶æ”¾åœ¨ `plugins/examples/` ç›®å½•
2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`npm run electron-dev`
3. æ‰“å¼€æ’ä»¶å•†åº— â†’ æœ¬åœ°å¼€å‘ â†’ åˆ·æ–°æœ¬åœ°æ’ä»¶

### è°ƒè¯•å·¥å…·

- **å¼€å‘è€…å·¥å…·**: `Ctrl+Shift+I`ï¼ˆWindows/Linuxï¼‰æˆ– `Cmd+Option+I`ï¼ˆMacï¼‰
- **æ—¥å¿—è¾“å‡º**: ä½¿ç”¨ `runtime.logger.info/warn/error()`
- **çƒ­é‡è½½**: åœ¨æ’ä»¶å•†åº—ç‚¹å‡»"é‡è½½æ’ä»¶"æŒ‰é’®

## ğŸ“¦ Manifest é…ç½®

### å¿…éœ€å­—æ®µ

```json
{
  "id": "unique-plugin-id",
  "name": "æ’ä»¶åç§°",
  "version": "1.0.0",
  "description": "æ’ä»¶æè¿°",
  "entry": "index.js",
  "permissions": [],
  "minAppVersion": "2.1.0"
}
```

### å¯é€‰å­—æ®µ

```json
{
  "author": {
    "name": "ä½œè€…å",
    "email": "email@example.com"
  },
  "icon": "icon.svg",
  "toolbar": {
    "location": "notes",
    "tooltip": "æ’ä»¶æç¤º"
  },
  "commands": [
    {
      "id": "command-id",
      "title": "å‘½ä»¤æ ‡é¢˜"
    }
  ],
  "categories": ["æ•ˆç‡"],
  "tags": ["productivity"]
}
```

## ğŸ” æƒé™åˆ—è¡¨

| æƒé™ | è¯´æ˜ |
|------|------|
| `notes:read` | è¯»å–ç¬”è®° |
| `notes:write` | åˆ›å»º/ä¿®æ”¹ç¬”è®° |
| `todos:read` | è¯»å–å¾…åŠ |
| `todos:write` | åˆ›å»º/ä¿®æ”¹å¾…åŠ |
| `tags:read` | è¯»å–æ ‡ç­¾ |
| `tags:write` | åˆ›å»º/ä¿®æ”¹æ ‡ç­¾ |
| `ui:open-note` | æ‰“å¼€ç¬”è®° |
| `ui:open-window` | æ‰“å¼€è‡ªå®šä¹‰çª—å£ |
| `ai:inference` | ä½¿ç”¨ AI |
| `notifications:show` | æ˜¾ç¤ºé€šçŸ¥ |
| `storage:read` | è¯»å–å­˜å‚¨ |
| `storage:write` | å†™å…¥å­˜å‚¨ |
| `network:request` | ç½‘ç»œè¯·æ±‚ |
| `clipboard:read/write` | å‰ªè´´æ¿è®¿é—® |
| `filesystem:read/write` | æ–‡ä»¶ç³»ç»Ÿè®¿é—® |

å®Œæ•´åˆ—è¡¨è§ [API å‚è€ƒ](./API_REFERENCE.md)ã€‚

## ğŸ¨ UI å¼€å‘

### Dialog çª—å£ï¼ˆæ¨èï¼‰

```javascript
await runtime.ui.openWindow({
  url: '/settings.html',
  title: 'è®¾ç½®',
  width: 800,
  height: 600,
  resizable: true,
  closable: true
})
```

### HTML é¡µé¢ç¤ºä¾‹

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ’ä»¶ç•Œé¢</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 20px;
    }
  </style>
</head>
<body>
  <h1>æ’ä»¶ç•Œé¢</h1>
  <p>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çª—å£</p>
</body>
</html>
```

## ğŸš€ å‘å¸ƒæ’ä»¶

### å‘å¸ƒå‰æ£€æŸ¥

- [ ] manifest.json å¡«å†™å®Œæ•´
- [ ] ç‰ˆæœ¬å·ç¬¦åˆè¯­ä¹‰åŒ–è§„èŒƒ
- [ ] æƒé™æœ€å°åŒ–
- [ ] åŒ…å« README.md
- [ ] æä¾›æ’ä»¶å›¾æ ‡
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] æ— æ•æ„Ÿä¿¡æ¯

### ç‰ˆæœ¬ç®¡ç†

ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemverï¼‰ï¼š

- **ä¸»ç‰ˆæœ¬å·**: ä¸å…¼å®¹çš„ API å˜æ›´
- **æ¬¡ç‰ˆæœ¬å·**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢
- **ä¿®è®¢å·**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®å¤

ç¤ºä¾‹ï¼š`1.2.3`

## ğŸ¤ è´¡çŒ®ä¸æ”¯æŒ

### è·å–å¸®åŠ©

- ğŸ“– é˜…è¯»æ–‡æ¡£
- ğŸ’¬ ç¤¾åŒºè®¨è®º
- ğŸ› æäº¤ Issue
- ğŸ“§ è”ç³»å¼€å‘å›¢é˜Ÿ

### è´¡çŒ®æ–¹å¼

- æŠ¥å‘Š Bug
- æå‡ºåŠŸèƒ½å»ºè®®
- æäº¤ç¤ºä¾‹æ’ä»¶
- å®Œå–„æ–‡æ¡£

## ğŸ“‹ å¸¸è§é—®é¢˜

### runtime æœªå®šä¹‰

**é—®é¢˜**: ä»£ç ä¸­ `runtime` æ˜¾ç¤ºæœªå®šä¹‰

**è§£å†³**: 
- ç¡®ä¿æ’ä»¶åœ¨ Worker ä¸­è¿è¡Œ
- ä¸è¦ä½¿ç”¨ `require('@flashnote/sdk')`
- ç›´æ¥ä½¿ç”¨å…¨å±€ `runtime` å¯¹è±¡

### æƒé™è¢«æ‹’ç»

**é—®é¢˜**: API è°ƒç”¨è¿”å›æƒé™é”™è¯¯

**è§£å†³**:
- åœ¨ `manifest.json` çš„ `permissions` ä¸­æ·»åŠ æ‰€éœ€æƒé™
- é‡æ–°åŠ è½½æ’ä»¶

### å‘½ä»¤ä¸æ˜¾ç¤º

**é—®é¢˜**: å·¥å…·æ æ²¡æœ‰æ˜¾ç¤ºæ’ä»¶æŒ‰é’®

**è§£å†³**:
- æ£€æŸ¥ `manifest.json` ä¸­çš„ `toolbar` é…ç½®
- ç¡®ä¿ `location` å­—æ®µæ­£ç¡®ï¼ˆ`notes`/`todos`/`calendar`ï¼‰
- é‡æ–°åŠ è½½æ’ä»¶

### çª—å£æ— æ³•æ‰“å¼€

**é—®é¢˜**: è°ƒç”¨ `runtime.ui.openWindow()` æ²¡æœ‰ååº”

**è§£å†³**:
- ç¡®ä¿æœ‰ `ui:open-window` æƒé™
- URL å¿…é¡»ä»¥ `/` å¼€å¤´
- HTML æ–‡ä»¶å¿…é¡»åœ¨æ’ä»¶æ ¹ç›®å½•

### Material-UI æ ·å¼åœ¨æ‰“åŒ…åä¸¢å¤±

**é—®é¢˜**: æ’ä»¶ UI ä½¿ç”¨ Material-UIï¼Œå¼€å‘æ¨¡å¼æ­£å¸¸ï¼Œæ‰“åŒ…åå®Œå…¨æ²¡æœ‰æ ·å¼

**åŸå› **: 
- Material-UI v5 ä½¿ç”¨ emotion CSS-in-JSï¼Œæ ·å¼ä¼šåœ¨ç»„ä»¶æ¸²æŸ“æ—¶åŠ¨æ€ç”Ÿæˆ
- æ’ä»¶è¿è¡Œåœ¨ iframe ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ emotion ä¼šå°†æ ·å¼æ³¨å…¥åˆ°ä¸»æ–‡æ¡£çš„ `<head>`
- ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒVite ä¼šå°† emotion æ ·å¼æå–åˆ°å¤–éƒ¨ CSS æ–‡ä»¶ï¼Œä½† MUI ç»„ä»¶çš„æ ·å¼æ˜¯æ‡’åŠ è½½çš„ï¼Œä¸åœ¨æå–çš„ CSS ä¸­

**è§£å†³æ–¹æ¡ˆ** â­ å¿…é¡»ä½¿ç”¨ç‹¬ç«‹çš„ emotion cacheï¼š

1. **ä¸»åº”ç”¨æ³¨å…¥ä¾èµ–**ï¼ˆåœ¨ `src/App.jsx` ä¸­ï¼‰ï¼š

```javascript
import { CacheProvider } from '@emotion/react'
import createCache from '@emotion/cache'

// ä¸º iframe åˆ›å»ºç‹¬ç«‹çš„ emotion cache
const iframeDoc = iframe.contentDocument || iframe.contentWindow.document
const iframeCache = createCache({
  key: 'iframe-emotion',
  container: iframeDoc.head,  // æ ·å¼æ³¨å…¥åˆ° iframe çš„ head
  prepend: true
})

// æš´éœ²ç»™æ’ä»¶ä½¿ç”¨
iframe.contentWindow.emotionCache = iframeCache
iframe.contentWindow.CacheProvider = CacheProvider
```

2. **æ’ä»¶ HTML ä½¿ç”¨ CacheProvider**ï¼š

```javascript
// è·å–ä¸»åº”ç”¨æ³¨å…¥çš„ä¾èµ–
const { React, ReactDOM, MaterialUI, emotionCache, CacheProvider } = window

function App() {
  // ä½ çš„ Material-UI ç»„ä»¶
  return (
    <ThemeProvider theme={appTheme}>
      <CssBaseline />
      <Box>{/* ... */}</Box>
    </ThemeProvider>
  )
}

// ä½¿ç”¨ CacheProvider åŒ…è£¹åº”ç”¨
const root = ReactDOM.createRoot(document.getElementById('root'))
if (emotionCache && CacheProvider) {
  root.render(
    <CacheProvider cache={emotionCache}>
      <App />
    </CacheProvider>
  )
} else {
  root.render(<App />)
}
```

**å…³é”®ç‚¹**ï¼š
- ä½¿ç”¨ `cache` å±æ€§ä¼ é€’ emotion cacheï¼ˆä¸æ˜¯ `value`ï¼‰
- `CacheProvider` å¿…é¡»åœ¨æœ€å¤–å±‚ï¼ŒåŒ…è£¹æ•´ä¸ªåº”ç”¨
- `ThemeProvider` åœ¨ `CacheProvider` å†…éƒ¨
- è¿™æ · Material-UI ç»„ä»¶çš„æ ·å¼ä¼šè‡ªåŠ¨æ³¨å…¥åˆ° iframe çš„ `<head>` ä¸­

**å‚è€ƒç¤ºä¾‹**: `plugins/examples/ai-task-planner/planner-mui.html`

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/Xperiamol/FlashNote)
- [å®˜æ–¹ç½‘ç«™](https://flashnote.app)
- [ç¤¾åŒºè®ºå›](https://community.flashnote.app)

## ğŸ“ æ›´æ–°æ—¥å¿—

### 2025-11-19

- ğŸ› ä¿®å¤ï¼šMaterial-UI æ’ä»¶åœ¨æ‰“åŒ…åæ ·å¼ä¸¢å¤±çš„é—®é¢˜
- ğŸ“š æ–°å¢ï¼šæ’ä»¶ UI ä¸­ä½¿ç”¨ Material-UI çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ
- â­ é‡è¦ï¼šæ·»åŠ  emotion CacheProvider ä½¿ç”¨æŒ‡å—

### 2025-11-10

- âœ¨ æ–°å¢ï¼šå®Œæ•´çš„æœ€ä½³å®è·µæ–‡æ¡£
- âœ¨ æ–°å¢ï¼šè¯¦ç»†çš„ API å‚è€ƒæ–‡æ¡£
- âœ¨ æ–°å¢ï¼šå¿«é€Ÿå¼€å§‹æŒ‡å—
- ğŸ”§ æ›´æ–°ï¼šå¼€å‘æŒ‡å—ï¼Œå¼ºè°ƒä½¿ç”¨å…¨å±€ `runtime` å¯¹è±¡
- ğŸ“š æ”¹è¿›ï¼šæ–‡æ¡£ç»“æ„å’Œå¯¼èˆª

---

**è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºå¼ºå¤§çš„ FlashNote æ’ä»¶ç”Ÿæ€ï¼** ğŸ‰
