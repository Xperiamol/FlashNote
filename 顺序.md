1. 项目初始化

创建项目根目录，例如：flashnote-v2

初始化：

npm init -y
npm install electron react react-dom @mui/material zustand better-sqlite3 vite
npm install eslint prettier --save-dev


配置 ESLint + Prettier（保持代码风格统一）

2. 推荐目录结构
flashnote-v2/
├─ electron/                 # 主进程相关代码
│  ├─ main.js                # Electron 主入口
│  ├─ preload.js             # Preload 脚本，暴露受控 API
│  ├─ services/              # 主进程业务逻辑
│  │  ├─ NoteService.js
│  │  ├─ DataImportService.js
│  │  ├─ SettingsService.js
│  │  └─ WindowManager.js
│  ├─ dao/                   # 数据访问层
│  │  ├─ DatabaseManager.js
│  │  ├─ NoteDAO.js
│  │  └─ SettingDAO.js
│  └─ utils/                 # 主进程工具函数
│
├─ src/                      # 渲染进程 (React)
│  ├─ index.jsx              # React 入口
│  ├─ App.jsx                # 主应用容器
│  ├─ components/            # 通用 UI 组件
│  │  ├─ NoteList.jsx
│  │  ├─ NoteEditor.jsx
│  │  ├─ Toolbar.jsx
│  │  └─ Dialogs.jsx
│  ├─ pages/                 # 页面级组件
│  │  ├─ MainWindow.jsx
│  │  ├─ Settings.jsx
│  │  └─ DetachedNoteWindow.jsx
│  ├─ hooks/                 # 自定义 Hooks
│  ├─ store/                 # Zustand 全局状态
│  │  └─ useStore.js
│  ├─ utils/                 # 前端工具函数（日期、Markdown 等）
│  └─ styles/                # 全局样式、MUI 主题
│
├─ assets/                   # 静态资源（图标、图片）
│
├─ plugins/                  # 本地插件目录（MVP 先空着）
│
├─ notes.db                  # SQLite 数据库文件
├─ package.json
└─ vite.config.js

3. 开发顺序（MVP）
阶段 1：基础环境与核心框架

 初始化 Electron + React（能跑起来窗口，展示 “Hello World”）

 配置 Vite 热更新

 添加 MUI 主题支持

 添加 Zustand 全局状态（管理当前选中笔记 id）

阶段 2：数据库与数据层

 DatabaseManager.js：负责初始化 SQLite

 NoteDAO.js：实现 createNote / getNote / updateNote / deleteNote / getAllNotes

 SettingDAO.js：实现 getSetting / setSetting

阶段 3：主进程服务

 NoteService.js：封装 CRUD，暴露给 preload.js

 SettingsService.js：主题、开机启动

 WindowManager.js：统一管理 MainWindow & DetachedNoteWindow

 DataImportService.js：实现 V1 JSON → SQLite 的迁移

阶段 4：Preload & IPC 桥接

 preload.js：定义 window.api.notes.*, window.api.settings.*

 确保 Renderer 只能通过 window.api 调用，安全隔离

阶段 5：前端 UI（最小可用版）

 MainWindow.jsx：三栏布局（左笔记列表 + 中编辑器 + 右设置入口）

 NoteList.jsx：笔记列表，按更新时间排序

 NoteEditor.jsx：Markdown 编辑器（react-markdown）

 Toolbar.jsx：新建笔记、搜索框、主题切换

 自动保存逻辑（debounce → IPC → NoteService）

阶段 6：功能增强

 数据导入：Settings 页面里提供导入入口，调用 DataImportService

 搜索功能：简单模糊匹配（title/content）

 悬浮球 (FloatBall)：单击弹出 QuickInput，快速创建笔记

 独立笔记窗口：右键“独立窗口” → DetachedNoteWindow

阶段 7：测试与优化

 写基础单元测试（NoteDAO、NoteService）

 验证性能（1000 篇笔记，冷启动 < 2s）

 优化 UI 一致性、快捷键支持

4. 未来迭代 (P1+)

 Todo 模块 + todos 表

 标签系统（tags）

 文件夹组织（folder_id）

 高度自定义（主题色、壁纸）

 插件商店、云端同步、AI 助手