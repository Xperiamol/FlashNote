

# 📄 PRD - F7 悬浮球与快捷入口（完整）

### 功能目标

为用户提供一个常驻、轻量、快速的笔记与待办入口。悬浮于屏幕全局，可随时拖动、点击、拖拽使用，帮助用户以最低操作成本记录灵感或任务。

---

### 功能描述

| 功能点       | 详细说明                                                                                                      |
| --------- | --------------------------------------------------------------------------------------------------------- |
| **悬浮展示**  | - 悬浮球常驻屏幕最上层，不被其他应用遮挡。<br>- 可全屏范围内自由拖动，松开后停留在释放位置。<br>- 自动贴边：靠近屏幕边缘时自动吸附，减少遮挡。                            |
| **单击操作**  | - 单击后，从悬浮球位置 **滑出一个轻量级输入框**（QuickInput）。<br>- 输入框支持纯文本/Markdown 基础输入。<br>- 输入内容保存至主应用数据库，并立即显示在笔记列表/待办列表。 |
| **双击操作**  | - 双击悬浮球可在 **笔记模式** 与 **待办模式** 之间切换。<br>- 悬浮球需有轻微 UI 变化（如颜色或小图标），提示当前模式。                                   |
| **三击操作**  | - 三击功能保留为 **语音输入占位**。<br>- 当前版本显示提示 “语音输入功能即将上线”。                                                         |
| **拖拽文本**  | - 用户可从浏览器、Word、PDF 等应用中 **选中一段文字 → 拖拽到悬浮球**。<br>- 悬浮球检测到拖拽进入时显示高亮或 “+” 提示。<br>- 松开后文字将保存为笔记或待办事项，取决于当前模式。 |
| **存储逻辑**  | - 笔记模式：生成一条笔记，标题为空，正文为输入/拖拽内容。<br>- 待办模式：生成一条待办事项，内容为输入/拖拽内容。                                             |
| **反馈机制**  | - 成功保存后，悬浮球轻微闪烁或显示气泡提示“已保存”。<br>- 避免用户在未打开主应用的情况下对结果产生不确定感。                                               |
| **右键菜单**  | - 右键点击悬浮球弹出菜单，提供：<br>   - 打开主应用<br>   - 切换模式（笔记/待办）<br>   - 设置入口<br>   - 退出应用                             |
| **UI 设计** | - 保持和主应用一样的设计风格，可随主应用切换颜色而变颜色                 |

---

### 用户场景

1. **灵感速记**
   小王在写代码时突然想到一个优化点，单击悬浮球，输入框滑出，他输入后保存为笔记，整个过程不到 10 秒。

2. **任务生成**
   小李在开会时双击悬浮球切换到待办模式，输入“整理会议纪要”，快速生成待办。

3. **资料收集**
   小张在网页上看到一段参考文字，拖拽到悬浮球，文字立即保存为笔记。

4. **未来扩展**
   用户三击悬浮球，看到提示“语音输入即将上线”，期待后续版本。

---

### 功能优先级

* 悬浮展示、单击输入 → **P0（核心必须实现）**
* 双击切换模式、拖拽文本 → **P0（核心必须实现）**
* 三击占位 → **P1（未来扩展）**
* 右键菜单、反馈机制、自动贴边 → **P0（优化体验）**

---

### 非功能性要求

* **响应速度**：点击或拖拽保存后，100ms 内反馈。
* **轻量性**：悬浮球常驻运行 CPU 占用 < 2%，内存占用 < 20MB。
* **稳定性**：输入框关闭前自动保存；拖拽内容过长（>5000 字）提示“请在主应用粘贴”。
* **兼容性**：支持来自浏览器、Office 文档、PDF 阅读器等的文本拖拽。
* **不遮挡**：避免覆盖任务栏、菜单栏等系统关键 UI。

